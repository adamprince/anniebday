<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Birthday Annemarie!</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bungee+Shade&family=Noto+Sans+Egyptian+Hieroglyphs&family=Pinyon+Script&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/modern-css-reset/dist/reset.min.css" />
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <audio id="music" autoplay loop>
    <source src="bg-music.mp3" type="audio/mp3">
    Your browser does not support the audio element.
  </audio>
  <video id="background-video" autoplay loop muted poster="https://assets.codepen.io/6093409/river.jpg">
    <source src="cloud-loop.mp4" type="video/mp4">
  </video>

  <a class="modal-trigger modal-trigger--video">ð“„€</a>
  <a class="modal-trigger modal-trigger--message">ð“„€</a>
  <a class="modal-trigger modal-trigger--picture">ð“„€</a>
  <a class="modal-trigger modal-trigger--sound">ð“„€</a>

  <main class="content">
    <div class="bungee">Happy Birthday</div>
    <div id="container">
      <div id="inner"></div>
    </div>
    <div class="script">Annemarie</div>
  </main>

  <svg viewBox="0 0 180 100" class="fx-noise" aria-hidden="true" style="width: 0; height: 0; visibility: hidden;">
    <filter id="noise" x="0%" y="0%" width="100%" height="100%">
      <feTurbulence type="fractalNoise" baseFrequency="0 0.2" result="NOISE" numOctaves="2">
        <animate attributeName="baseFrequency" calcMode="discrete" dur="0.3s" values="0 0.3; 0 0.9; 0 0.4" repeatCount="indefinite"></animate>
      </feTurbulence>
      <feDisplacementMap in="SourceGraphic" in2="NOISE" scale="30" xChannelSelector="R" yChannelSelector="R"></feDisplacementMap>
    </filter>
    <filter id="noise1" x="0%" y="0%" width="100%" height="100%">
      <feTurbulence type="fractalNoise" baseFrequency="0 0.2" result="NOISE" numOctaves="2"></feTurbulence>
      <feDisplacementMap in="SourceGraphic" in2="NOISE" scale="30" xChannelSelector="R" yChannelSelector="R"></feDisplacementMap>
    </filter>
    <filter id="noise2" x="0%" y="0%" width="100%" height="100%">
      <feTurbulence type="fractalNoise" baseFrequency="0 0.4" result="NOISE" numOctaves="2"></feTurbulence>
      <feDisplacementMap in="SourceGraphic" in2="NOISE" scale="30" xChannelSelector="R" yChannelSelector="R"></feDisplacementMap>
    </filter>
    <filter id="noise3" x="0%" y="0%" width="100%" height="100%">
      <feTurbulence type="fractalNoise" baseFrequency="0 0.3" result="NOISE" numOctaves="2"></feTurbulence>
      <feDisplacementMap in="SourceGraphic" in2="NOISE" scale="100" xChannelSelector="R" yChannelSelector="R"></feDisplacementMap>
    </filter>
    <filter id="noise4" x="0%" y="0%" width="100%" height="100%">
      <feTurbulence type="fractalNoise" baseFrequency="5 0.3" result="NOISE" numOctaves="2"></feTurbulence>
      <feDisplacementMap in="SourceGraphic" in2="NOISE" scale="500" xChannelSelector="R" yChannelSelector="R"></feDisplacementMap>
    </filter>
  </svg>

  <script>
      // Start move image with mouse
      (function() {
        // Init
        var container = document.getElementById("container"),
          inner = document.getElementById("inner");

        // Mouse
        var mouse = {
          _x: 0,
          _y: 0,
          x: 0,
          y: 0,
          updatePosition: function(event) {
            var e = event || window.event;
            this.x = e.clientX - this._x;
            this.y = (e.clientY - this._y) * -1;
          },
          setOrigin: function(e) {
            this._x = e.offsetLeft + Math.floor(e.offsetWidth / 2);
            this._y = e.offsetTop + Math.floor(e.offsetHeight / 2);
          },
          show: function() {
            return "(" + this.x + ", " + this.y + ")";
          }
        };

        // Track the mouse position relative to the center of the container.
        mouse.setOrigin(container);

        //-----------------------------------------

        var counter = 0;
        var updateRate = 10;
        var isTimeToUpdate = function() {
          return counter++ % updateRate === 0;
        };

        //-----------------------------------------

        var onMouseEnterHandler = function(event) {
          update(event);
        };

        var onMouseLeaveHandler = function() {
          inner.style = "";
        };

        var onMouseMoveHandler = function(event) {
          if (isTimeToUpdate()) {
            update(event);
          }
        };

        //-----------------------------------------

        var update = function(event) {
          mouse.updatePosition(event);
          updateTransformStyle(
            (mouse.y / inner.offsetHeight / 2).toFixed(2),
            (mouse.x / inner.offsetWidth / 2).toFixed(2)
          );
        };

        var updateTransformStyle = function(x, y) {
          var style = "rotateX(" + x + "deg) rotateY(" + y + "deg)";
          inner.style.transform = style;
          inner.style.webkitTransform = style;
          inner.style.mozTransform = style;
          inner.style.msTransform = style;
          inner.style.oTransform = style;
        };

        //-----------------------------------------

        container.onmouseenter = onMouseEnterHandler;
        container.onmouseleave = onMouseLeaveHandler;
        container.onmousemove = onMouseMoveHandler;
      })();

      // JavaScript to play the music when the page loads
      window.addEventListener('DOMContentLoaded', function () {
          var music = document.getElementById('music');
          music.play();
      });

  </script>
</body>
</html>
